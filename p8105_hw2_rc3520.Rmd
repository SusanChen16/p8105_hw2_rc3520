---
title: "p8105_hw2_rc3520.Rmd"
author: "Ruyi Chen"
date: "2023-10-03"
output: github_document
---

```{r}
library (tidyverse)
library(tidyr)
library(readxl)
library(readr)
```


# Probelm 1
## Clean the data in pols-month.csv.
### Use separate() to break up the variable mon into integer variables year, month, and day; replace month number with month name; create a president variable taking values gop and dem, and remove prez_dem and prez_gop; and remove the day variable.
```{r eval=FALSE}
 pols_month_df= 
  read_csv("./fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(col = mon,into = c("year","month","day"),sep = '-', convert = TRUE) %>%
  mutate(
    year = as.integer(year), 
    month = as.integer(month), 
    month = month.abb[month],
    day = as.integer(day),
    president = ifelse(prez_gop, "dem", "gop")
    ) %>%
  select(-prez_dem, -prez_gop, -day)
pols_month_df
```

## Clean the data in snp.csv using a similar process to the above. For consistency across datasets, arrange according to year and month, and organize so that year and month are the leading columns.
```{r eval = False}
snp_df=
    read_csv("./fivethirtyeight_datasets/snp.csv") %>%
    drop_na() %>%
    janitor::clean_names() %>%
    separate(date, into  = c("month", "day", "year")) %>%
  mutate(year = as.integer(year), 
         year=ifelse(year<23, year+2000, year+1900),
         month = as.integer(month), 
         month = month.abb[month],
         day = as.integer(day)) %>%
  select(year,month,close,-day) %>%
  arrange(year,month) 
snp_df

```
##Third, tidy the unemployment data so that it can be merged with the previous datasets. This process will involve switching from “wide” to “long” format; ensuring that key variables have the same name; and ensuring that key variables take the same values.
```{r eval = False}
unemployment_df=
    read_csv("./fivethirtyeight_datasets/unemployment.csv",
             col_names = TRUE,
              show_col_types = FALSE) %>%
    janitor::clean_names() %>%
  drop_na() %>%
  pivot_longer(jan:dec, names_to = "month", values_to = "unemployment_percent") %>%
  mutate(month = str_to_title(month)) %>%
  arrange(year, month)
unemployment_df
```
##Join the datasets by merging snp into pols, and merging unemployment into the result
```{r eval = False}
pols_snp_df = left_join(pols_month_df, snp_df, by = c("year", "month"))
pols_snp_unemployment_df = left_join(pols_snp_df, unemployment_df, by = c("year", "month"))

pols_snp_unemployment_df

```

